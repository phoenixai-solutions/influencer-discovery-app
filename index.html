<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Creator Discovery | Aruba Tourism</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <style>
    body { background-color: #f9fafb; font-family: 'Inter', sans-serif; }
    .input { border: 1px solid #e5e7eb; border-radius: 12px; padding: 10px 12px; font-size: 14px; width: 100%; }
    .label { font-size: 12px; color: #6b7280; margin-bottom: 6px; display:block; }
    .field { display:flex; flex-direction:column; }
    .filters-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
    .filters-actions { display:flex; justify-content: space-between; align-items:center; margin-top:10px; }
    .btn { border-radius: 12px; padding: 8px 16px; font-size: 14px; font-weight:500; }
    .btn-primary { background:#0f172a; color:#fff; }
    .btn-outline { border:1px solid #e5e7eb; background:#fff; color:#111827; }
    .btn-outline:hover { background:#f9fafb; }
    .advanced.hidden { display:none; }
    .advanced { margin-top: 16px; border-top:1px solid #e5e7eb; padding-top:16px; display:grid; gap:14px; }
    .group { background:#f8fafc; border:1px solid #e5e7eb; border-radius:12px; padding:12px; }
    .group-title { font-size:11px; text-transform:uppercase; color:#64748b; font-weight:600; margin-bottom:8px; }
    .group-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; }
    @media (max-width:1024px){ .filters-row { grid-template-columns:1fr 1fr; } .group-grid { grid-template-columns:1fr 1fr; } }
  </style>
</head>
<body class="min-h-screen">

  <header class="bg-white shadow-sm">
    <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
      <h1 class="text-lg font-semibold text-gray-800">Creator Discovery</h1>
      <nav class="space-x-4 text-sm text-gray-600">
        <a class="font-semibold text-gray-900" href="#">Find Influencers</a>
        <a href="#">Manage Influencers</a>
        <a href="#">Campaigns</a>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-6">
    <div class="bg-white border border-gray-200 rounded-2xl p-5 shadow-sm">

      <!-- Platform selector -->
      <div class="flex flex-wrap gap-2 mb-4">
        <button class="px-4 py-2 rounded-full bg-gray-900 text-white text-sm" id="btnIG">Instagram</button>
        <button class="px-4 py-2 rounded-full bg-gray-100 text-gray-700 text-sm" id="btnTT">TikTok</button>
        <button class="px-4 py-2 rounded-full bg-gray-100 text-gray-700 text-sm" id="btnYT">YouTube</button>
        <button class="px-4 py-2 rounded-full bg-gray-100 text-gray-700 text-sm" id="btnTW">Twitch</button>
        <button class="px-4 py-2 rounded-full bg-gray-100 text-gray-700 text-sm" id="btnX">X</button>
      </div>

      <!-- Core filters -->
      <div class="filters-row">
        <div class="field">
          <label class="label">Topic / Keywords</label>
          <input id="kw" class="input" placeholder="e.g. gastronomÃ­a, #foodie, chef">
        </div>
        <div class="field">
          <label class="label">Location</label>
          <input id="location" class="input" placeholder="e.g. Argentina, United States">
        </div>
        <div class="field">
          <label class="label">Audience language</label>
          <input id="language" class="input" placeholder="e.g. English, Spanish">
        </div>
        <div class="field">
          <label class="label">Gender</label>
          <select id="gender" class="input">
            <option value="">Any</option>
            <option value="female">Female</option>
            <option value="male">Male</option>
          </select>
        </div>
      </div>

      <!-- Email + Advanced toggle -->
      <div class="filters-actions">
        <label class="flex items-center gap-2 text-sm text-gray-700 mt-3">
          <input id="hasEmail" type="checkbox"> Has email
        </label>
        <button id="btnAdvanced" class="btn btn-outline mt-3">Advanced filters â–¾</button>
      </div>

      <!-- Advanced filters -->
      <div id="advancedPanel" class="advanced hidden">
        <!-- Audience metrics -->
        <div class="group">
          <div class="group-title">Audience metrics</div>
          <div class="group-grid">
            <div class="field"><label class="label">Followers (min)</label><input id="followersMin" class="input" placeholder="Min"></div>
            <div class="field"><label class="label">Followers (max)</label><input id="followersMax" class="input" placeholder="Max"></div>
            <div class="field"><label class="label">Engagement % (min)</label><input id="erMin" class="input" placeholder="Min"></div>
            <div class="field"><label class="label">Engagement % (max)</label><input id="erMax" class="input" placeholder="Max"></div>
          </div>
        </div>

        <!-- Activity & recency -->
        <div class="group">
          <div class="group-title">Activity & recency</div>
          <div class="group-grid">
            <div class="field"><label class="label">Last Post</label>
              <select id="lastPost" class="input">
                <option value="7d">Last 7 days</option>
                <option value="14d">Last 14 days</option>
                <option value="30d" selected>Last 30 days</option>
                <option value="60d">Last 60 days</option>
                <option value="90d">Last 90 days</option>
              </select>
            </div>
            <div class="field"><label class="label">Posting Frequency (posts/mo)</label><input id="postingFrequency" class="input" placeholder="e.g. 4"></div>
            <div class="field"><label class="label">Growth %</label><input id="growthPct" class="input" placeholder="%"></div>
            <div class="field"><label class="label">Months</label><input id="growthMonths" class="input" placeholder="3"></div>
          </div>
        </div>

        <!-- Creator quality -->
        <div class="group">
          <div class="group-title">Creator quality</div>
          <div class="flex flex-wrap gap-4">
            <label class="flex items-center gap-2 text-sm text-gray-700"><input id="verified" type="checkbox"> Verified</label>
            <label class="flex items-center gap-2 text-sm text-gray-700"><input id="excludePrivate" type="checkbox" checked> Exclude Private</label>
          </div>
        </div>

        <!-- Brand fit -->
        <div class="group">
          <div class="group-title">Brand fit</div>
          <div class="group-grid">
            <div class="field"><label class="label">Keywords in Bio</label><input id="bioKeywords" class="input" placeholder="e.g. Aruba, Caribbean, travel deals"></div>
            <label class="flex items-center gap-2 text-sm text-gray-700"><input id="brandDeals" type="checkbox"> Has done brand deals</label>
            <label class="flex items-center gap-2 text-sm text-gray-700"><input id="affiliateLinks" type="checkbox"> Promotes affiliate links</label>
            <label class="flex items-center gap-2 text-sm text-gray-700"><input id="linkInBio" type="checkbox"> Has link in bio</label>
          </div>
        </div>
      </div>

      <!-- Search button -->
      <div class="flex justify-end mt-5">
        <button id="btnSearch" class="btn btn-primary">Search</button>
      </div>

    </div>
  </main>

  <script>
    // Platform select (simple visual toggle)
    const buttons = ['btnIG','btnTT','btnYT','btnTW','btnX'];
    let platform = 'instagram';
    buttons.forEach(id => {
      document.getElementById(id).addEventListener('click', () => {
        buttons.forEach(b => document.getElementById(b).classList.remove('bg-gray-900','text-white'));
        document.getElementById(id).classList.add('bg-gray-900','text-white');
        platform = id === 'btnTT' ? 'tiktok' :
                   id === 'btnYT' ? 'youtube' :
                   id === 'btnTW' ? 'twitch' :
                   id === 'btnX' ? 'twitter' : 'instagram';
      });
    });

    // Toggle Advanced Filters
    document.getElementById('btnAdvanced').addEventListener('click', () => {
      const panel = document.getElementById('advancedPanel');
      panel.classList.toggle('hidden');
      document.getElementById('btnAdvanced').textContent =
        panel.classList.contains('hidden') ? 'Advanced filters â–¾' : 'Advanced filters â–´';
    });

    function n(v){ const num = Number(v); return Number.isFinite(num) ? num : null; }
    function any(v){ return v !== undefined && v !== null && String(v).trim() !== ''; }
    function pack(obj){
      const out={};
      Object.entries(obj).forEach(([k,v])=>{
        if(v==null) return;
        if(Array.isArray(v)&&!v.length) return;
        if(typeof v==='object'&&!Array.isArray(v)){
          const keep=Object.fromEntries(Object.entries(v).filter(([,vv])=> vv!==null&&vv!==undefined&&vv!==''));
          if(Object.keys(keep).length) out[k]=keep;
        } else if(v!=='') out[k]=v;
      });
      return out;
    }

    document.getElementById('btnSearch').addEventListener('click', () => {
      const filters = pack({
        ai_search: document.getElementById('kw').value,
        location: any(document.getElementById('location').value)?[document.getElementById('location').value]:undefined,
        profile_language: any(document.getElementById('language').value)?[document.getElementById('language').value]:undefined,
        gender: document.getElementById('gender').value||undefined,
        number_of_followers:{min:n(document.getElementById('followersMin')?.value),max:n(document.getElementById('followersMax')?.value)},
        engagement_percent:{min:n(document.getElementById('erMin')?.value),max:n(document.getElementById('erMax')?.value)},
        posting_frequency:n(document.getElementById('postingFrequency')?.value),
        follower_growth:{growth_percentage:n(document.getElementById('growthPct')?.value),time_range_months:n(document.getElementById('growthMonths')?.value)},
        is_verified:document.getElementById('verified')?.checked||undefined,
        exclude_private_profile:document.getElementById('excludePrivate')?.checked||undefined,
        has_done_brand_deals:document.getElementById('brandDeals')?.checked||undefined,
        promotes_affiliate_links:document.getElementById('affiliateLinks')?.checked||undefined,
        has_link_in_bio:document.getElementById('linkInBio')?.checked||undefined
      });

      const onlyWithEmails=document.getElementById('hasEmail').checked;
      const body={platform,paging:{limit:50,page:1},sort:{sort_by:'relevancy',sort_order:'desc'},filters,
        last_post:document.getElementById('lastPost')?.value,only_with_emails:onlyWithEmails};
      console.log('Payload:',body);

      // ðŸ‘‰ Replace this console.log with your Make webhook call:
      // window.runDiscovery(body);
    });
  </script>
</body>
</html>
